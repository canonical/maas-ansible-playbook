---
# Role to install a R/W Postgres
- name: "Install Postgres"
  ansible.builtin.include_role:
    name: maas_postgres
    tasks_from: install_postgres

- name: "Configure Postgres Primary"
  ansible.builtin.import_tasks:
    configure_postgres_primary.yaml

- name: "Setup o11y"
  ansible.builtin.include_role:
    name: maas_postgres
    tasks_from: o11y_pg
  when: o11y_enable

- name: "Setup firewall"
  ansible.builtin.include_role:
    name: maas_firewall
    tasks_from: setup_firewall_rules
  when: ('maas_region_controller' not in group_names)
