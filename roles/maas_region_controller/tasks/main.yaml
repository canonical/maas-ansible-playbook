---
# Playbook to generate a MAAS region

- hosts: localhost

  vars_prompt:
    - name: maas_installation_channel
      prompt: Install MAAS from [deb] or [snap]?
      default: "snap"
      private: false

    - name: maas_version
      prompt: Version of MAAS to install
      default: "latest"
      private: false

  tasks:
    - name: Display choices
      ansible.builtin.debug:
        msg: 'Installing MAAS {{ maas_installation_channel }} V. {{ maas_version }}'

    - name: Install MAAS with Snap
      import_tasks: snap.yaml
      when: maas_installation_channel|lower == 'snap'

    - name: Install MAAS with Debian
      import_tasks: debian.yaml
      when: maas_installation_channel|lower == 'deb'

    - name: Initialise MAAS region
      ansible.builtin.command: maas init region --database-uri maas-test-db:///
