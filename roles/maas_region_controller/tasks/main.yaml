---
# Playbook to generate a MAAS region

- hosts: localhost

  vars_prompt:
    - name: maas_installation_channel
      prompt: Install MAAS from [deb] or [snap]?
      default: "snap"
      private: false

    - name: maas_version
      prompt: Version of MAAS to install
      default: "latest"
      private: false

  tasks:
    - name: Determine if MAAS is already installed
      ansible.builtin.command: dpkg -l | grep maas
      register: maas_installed

    - name: Run MAAS Installation
      import_tasks: install_maas.yaml
      when: maas_installed | length == 0

    - name: Run MAAS Updates
      import_tasks: update_maas.yaml
      when: maas_installed | length > 0
